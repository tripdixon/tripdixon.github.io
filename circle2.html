<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Circle - Solutions Engineer Technical Assessment - Question 2</title>

  <script>

    function resetCookieToZero(){
      document.cookie = "myValue=0";
      let cookies = document.cookie;
      console.log("The cookie was reset to a value of 0);
    }

    function deleteCookie(){
      document.cookie = "myValue=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      console.log("The cookie was just deleted");
    }

    function getCookie(cName) {
      const name = cName + "=";
      const cDecoded = decodeURIComponent(document.cookie);
      const cArr = cDecoded .split('; ');
      let res;
      cArr.forEach(val => {
          if (val.indexOf(name) === 0) res = val.substring(name.length);
      })
      return res;
    }

/*
    function getCookie(name) {
    var dc = document.cookie;
    var prefix = name + "=";
    var begin = dc.indexOf("; " + prefix);
      if (begin == -1) {
          begin = dc.indexOf(prefix);
          if (begin != 0) return null;
      }
      else
      {
          begin += 2;
          var end = document.cookie.indexOf(";", begin);
          if (end == -1) {
          end = dc.length;
          }
      }
    return decodeURI(dc.substring(begin + prefix.length, end));
    }
  */

    //console.log("The ON LOAD value of the myValue cookie is: " + getCookie("myValue"));

    if(getCookie("myValue") == null){
      document.cookie = "myValue=0; expires=Wed, 05 Aug 2025 23:00:00 UTC";
      console.log("The value of the cookie is: " + getCookie("myValue"));
    } else {
      let newCookieValue = parseInt(getCookie("myValue"), 10) + 1;
      document.cookie = "myValue=" + newCookieValue + "; expires=Wed, 05 Aug 2025 23:00:00 UTC";
      console.log("The value of the cookie was just reset to: " + getCookie("myValue"));
    }

  </script>
</head>
 
<body>
  <h1>1</h1>
  <h2>Circle - Solutions Engineer Technical Assessment - Question 2</h2>
  <p>Instructions:  Create a function that sets a cookie.</p>
  <h2>Solution</h2>
  <p>1. Press Command + Option + J (Mac) or Control + Shift + J (Windows, Linux, Chrome OS) to open the console to view page output.<br>
  </p>
      
      <button id="reset" type="button" onclick="resetCookieToZero()">Reset Cookie</button>
      <button id="delete" type="button" onclick="deleteCookie()">Delete Cookie</button>
  
  </body>
  </html>